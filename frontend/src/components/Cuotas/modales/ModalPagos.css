:root{
  --primary:#4F46E5;--primary-hover:#4338CA;--primary-light:#EEF2FF;--primary-light-hover:#E0E7FF;
  --secondary:#6B7280;--secondary-hover:#4B5563;--success:#10B981;--success-strong:#059669;
  --success-light:#D1FAE5;--success-tint:#ECFDF5;--danger:#EF4444;--warning:#F59E0B;--warning-hover:#D97706;
  --warning-light:#FEF3C7;--white:#FFFFFF;--gray-50:#F9FAFB;--gray-100:#F3F4F6;--gray-200:#E5E7EB;
  --gray-300:#D1D5DB;--gray-400:#9CA3AF;--gray-500:#6B7280;--gray-600:#4B5563;--gray-700:#374151;
  --gray-800:#1F2937;--gray-900:#111827;--border-radius:8px;--border-radius-lg:12px;
  --shadow-sm:0 1px 2px 0 rgba(0,0,0,.05);--shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);
  --shadow-md:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);
  --shadow-lg:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);
  --shadow-xl:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);
  --periodos-gap:.6rem;
  --periodo-item-h:60px; /* alto estimado de cada tarjeta para calcular 3 filas */
}
*{box-sizing:border-box}

/* Overlay & container */
.modal-pagos-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:1000;padding:1rem;animation:fadeIn .3s ease-out;backdrop-filter:blur(8px)}
.modal-pagos-contenido{background:transparent;box-shadow:var(--shadow-xl);width:100%;max-width:600px;display:flex;flex-direction:column;border-radius:var(--border-radius-lg);overflow:hidden}
.modal-pagos-overlay.active .modal-pagos-contenido{transform:scale(1)}
@keyframes fadeIn{from{opacity:0;backdrop-filter:blur(0)}to{opacity:1;backdrop-filter:blur(8px)}}
@media (max-width:1450px){.modal-pagos-contenido{transform:scale(.9);transform-origin:center top}}

/* Header */
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:var(--primary);border-bottom:1px solid rgba(255,255,255,.1)}
.modal-header-content{display:flex;align-items:center;gap:1rem}
.modal-icon-circle{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;color:#fff}
.modal-title{margin:0;font-size:1.25rem;font-weight:600;color:#fff}
.modal-close-btn{background:none;border:none;padding:.5rem;cursor:pointer;color:#fff;transition:.2s;display:flex;align-items:center;justify-content:center;border-radius:6px;width:36px;height:36px}
.modal-close-btn:hover{background:rgba(255,255,255,.1)}
.modal-close-btn:disabled{opacity:.5;cursor:not-allowed}

/* Body */
.modal-body{padding:1rem 0;background:#fff;max-height:80vh;display:flex;flex-direction:column;min-height:120px}
.modal-body>.success-card:only-child{margin:auto 1.5rem}

.socio-info-card{background:var(--gray-50);border-radius:var(--border-radius);padding:1.25rem;margin:0 1.5rem 1.25rem;border-left:4px solid var(--primary)}
.socio-info-header{display:flex;flex-direction:column;gap:.5rem}
.socio-nombre{font-size:1.125rem;font-weight:600;color:var(--gray-900);margin:0}
.socio-fecha{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--gray-600)}
.fecha-label{font-weight:500}
.fecha-valor{color:var(--gray-700);font-weight:500}

/* Condonar */
.condonar-box{margin:0 1.5rem 1rem;padding:1rem;border:1px solid var(--gray-200);border-radius:var(--border-radius);background:var(--gray-50);transition:background .2s,border-color .2s,box-shadow .2s}
.condonar-box.is-active{background:var(--warning-light);border-color:#FDE68A;box-shadow:0 1px 0 0 rgba(245,158,11,.12) inset}
.condonar-check{display:flex;align-items:center;gap:.75rem;cursor:pointer;user-select:none}
.condonar-check input{display:none}
.switch{width:44px;height:24px;background:var(--gray-300);border-radius:999px;position:relative;transition:background .2s;flex:0 0 auto}
.switch-thumb{position:absolute;top:3px;left:3px;width:18px;height:18px;border-radius:999px;background:#fff;box-shadow:var(--shadow-sm);transition:transform .2s}
.condonar-check input:checked + .switch{background:var(--warning)}
.condonar-check input:checked + .switch .switch-thumb{transform:translateX(20px)}
.switch-label{color:var(--gray-800);font-size:.95rem}

/* Periodos */
.periodos-section{padding:0 1.5rem;margin-top:.5rem} /* mismo padding lateral que el resto */
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}
.section-header-actions{display:flex;align-items:center;gap:1rem}
.section-header-actions .btn{margin-right:0} /* borde derecho alineado con padding del section */
.section-title{font-size:.875rem;font-weight:600;color:var(--gray-700);text-transform:uppercase;letter-spacing:.05em;margin:0}

.loading-state{display:flex;align-items:center;justify-content:center;gap:.75rem;padding:2rem;color:var(--gray-600)}
.spinner{width:1.25rem;height:1.25rem;border:2px solid var(--gray-200);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Grid con scroll = 3 filas visibles */
.periodos-grid-container{
  max-height: calc((var(--periodo-item-h) + var(--periodos-gap)) * 3 + 2px);
  overflow-y: auto;
  padding: 2px 2px 2px 0;
  scrollbar-gutter: stable;
  min-height: 120px;
}
.periodos-grid{display:flex;flex-wrap:wrap;gap:var(--periodos-gap);align-content:flex-start}

.periodo-card{display:flex;align-items:center;padding:.75rem;border-radius:var(--border-radius);background:#fff;border:1px solid var(--gray-200);cursor:pointer;transition:.2s;position:relative;overflow:hidden;min-height:var(--periodo-item-h);flex:0 1 calc(50% - (var(--periodos-gap)/2));max-width:calc(50% - (var(--periodos-gap)/2))}
.periodo-card:hover:not(.pagado){border-color:var(--primary);box-shadow:var(--shadow-sm)}
.periodo-card.seleccionado{background:var(--primary-light);border-color:var(--primary)}
.periodo-card.pagado{background:var(--gray-50);cursor:not-allowed}
.periodo-card.pagado::after{content:"";position:absolute;inset:0;}

.periodo-checkbox{position:relative;margin-right:.6rem;z-index:1}
.periodo-checkbox input{position:absolute;opacity:0;height:0;width:0}
.checkmark{position:relative;height:1.05rem;width:1.05rem;background:#fff;border:1px solid var(--gray-300);border-radius:4px;transition:.2s}
.periodo-card:hover .checkmark{border-color:var(--primary)}
.periodo-checkbox input:checked ~ .checkmark{background:var(--primary);border-color:var(--primary)}
.checkmark:after{content:"";position:absolute;display:none;left:6px;top:2px;width:4px;height:8px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}
.periodo-checkbox input:checked ~ .checkmark:after{display:block}

.periodo-label{
  font-size:.9375rem;font-weight:500;color:var(--gray-800);
  cursor:pointer;display:flex;align-items:center;gap:1rem;
  flex:1; /* ocupa el ancho restante para empujar el estado */
}
.periodo-status{
  display:flex;align-items:center;gap:.25rem;font-size:.7rem;font-weight:500;
  color:var(--success);background:var(--success-light);padding:.25rem .6rem;border-radius:9999px;white-space:nowrap;
  margin-left:auto;            /* empuja completamente a la derecha */
  margin-right:.25rem;         /* pequeño margen con el borde */
}

/* Footer */
.modal-footer{display:flex;justify-content:space-between;align-items:center;gap:.75rem;padding:1.5rem;background:#fff;border-top:1px solid var(--gray-200)}
.footer-left{display:flex;align-items:center}
.total-badge{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .875rem;border-radius:9999px;font-weight:600;font-size:.95rem;background:#2563EB;color:#fff;box-shadow:var(--shadow-sm);user-select:none}
.total-badge-warning{background:var(--warning);color:#1F2937}
.footer-actions{display:flex;gap:.75rem}

.btn{padding:.75rem 1.5rem;border-radius:var(--border-radius);font-size:.875rem;font-weight:500;cursor:pointer;transition:.2s;border:1px solid transparent;display:flex;align-items:center;justify-content:center;min-width:130px}
.btn-small{padding:.4rem .75rem;font-size:.75rem;min-width:auto}
.btn-terciario{background:var(--primary-light);color:var(--primary);border:1px solid var(--primary)}
.btn-terciario:hover:not(:disabled){background:var(--primary-light-hover)}
.btn-primary{background:var(--primary);color:#fff;box-shadow:var(--shadow-sm)}
.btn-primary:hover:not(:disabled){background:var(--primary-hover);box-shadow:var(--shadow)}
.btn-primary:disabled{background:var(--gray-300);cursor:not-allowed;box-shadow:none}
.btn-warning{background:var(--warning);color:#fff;box-shadow:var(--shadow-sm)}
.btn-warning:hover:not(:disabled){background:var(--warning-hover);box-shadow:var(--shadow)}
.btn-warning:disabled{background:#FBC85B;cursor:not-allowed;box-shadow:none}
.btn-secondary{background:#fff;color:var(--gray-700);border-color:var(--gray-300)}
.btn-secondary:hover:not(:disabled){background:var(--gray-50);border-color:var(--gray-400)}
.btn-secondary:disabled{opacity:.5;cursor:not-allowed}

.spinner-btn{display:inline-block;width:.875rem;height:.875rem;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:spin 1s ease-in-out infinite;margin-right:.5rem}

/* Responsive */
@media (max-width:600px){
  .modal-header{padding:1.25rem}
  .modal-body{padding:.75rem 0}
  .modal-footer{padding:1.25rem;flex-direction:column;align-items:stretch;gap:.75rem}
  .footer-actions{width:100%;display:flex;gap:.5rem}
  .btn{width:100%}
  .periodo-card{flex-basis:100%;max-width:100%}
  .section-header-actions{flex-direction:column;align-items:flex-end;gap:.5rem}
}
@media (max-width:400px){
  .modal-header-content{flex-direction:column;align-items:flex-start;gap:.5rem}
  .modal-icon-circle{display:none}
}

/* Éxito */
.success-card{position:relative;background:#fff;border:1px solid var(--gray-200);border-radius:14px;padding:1rem 1rem 1rem 2.5rem;margin:0 1.5rem 1.5rem;box-shadow:var(--shadow-sm);text-align:center;min-height:140px;display:flex;flex-direction:column;justify-content:center;align-items:center}
.success-card::before{content:"";position:absolute;left:12px;top:12px;bottom:12px;width:6px;background:linear-gradient(180deg,var(--success),var(--success-strong));border-radius:9999px;filter:drop-shadow(0 0 2px rgba(16,185,129,.25))}
.success-title{margin:0 0 .25rem;color:var(--success);font-weight:800;font-size:1.25rem}
.success-sub{margin:0;color:var(--gray-600);font-weight:500;line-height:1.45}
.success-info{display:none}
